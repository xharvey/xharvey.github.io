---
layout: post
title: Python初探
---
python在数据分析、人工智能方面应用广泛，编写也很适合编写便利的脚本工具、也应用于web方面和服务器端语言，作为胶水语言方便调用其他语言库、丰富的第三方库，在代码编写和功能实现上更为简单便捷

特性：多平台运行、环境配置（Anaconda）语法简单、强大数据处理库、丰富第三方库、编程利器（Jupyter NoteBook）
# 基础 #

运算符
	
	and / or / not 	#逻辑运算符
	in / not in		#成员运算符
	is / is not		#身份运算符
for循环：sequence可以为字符串/数组

	for iterating_var in sequence:
   		statements(s)
	for num in range(10,20):
		print index

变量
	
	list2 = [1, 2, 3, 4, 5]	#列表
	tup2 = (1, 2, 3, 4, 5)	#元组，元素不可修改删除，可删除整个元组，操作符可以使用
	len() / + / * / in / for in #运算符
	...						#内置函数方法
	

# 函数 #
	
	def functionname( parameters ):
	   	"函数_文档字符串"
	   	function_suite
	   	return [expression]
参数
	
	*args		#可变参数
	**kwargs	#关键字参数
装饰器 @property


# 模块 #
引入模块和模块函数调用，模块使用pip命令 pip install xxx
	
	import module1[, module2[,... moduleN]]
	from modname import name1[, name2[, ... nameN]]
	#模块名.函数名
dir()函数

globals() 和 locals() 函数

reload() 函数


# 编码 #
字符编码：ascii/gbk/unicode(utf-8)
文件编码转换
	
    def convert(filename): 
	try: 
		content=codecs.open(filename,'r').read() 
		source_encoding=chardet.detect(content)['encoding'] 
		print source_encoding
		if source_encoding != "UTF-8" or source_encoding != "utf-8":
			content=content.decode(source_encoding,errors = 'ignore').encode("UTF-8") 
			codecs.open(filename,'w').write(content) 
	except IOError as err: 
		print("I/O error:{0}".format(err)) 

# 文件I/O #
遍历目录所有文件

    def listFiles(dirPath):
	fileList=[]
	for root,dirs,files in os.walk(dirPath):
		for fileObj in files:
			fileList.append(os.path.join(root,fileObj))
	return fileList
输出log到文件
	
	logData = open("./log/log.txt", 'w+')
	print >> logData,'[log] %d %s'% (num, str) + temp + " ------> " + nStr	
读文件,防止IOError

	file_txt = "D:\\test.txt"
	try:
		f = open(file_txt, "r")
		print(f.read())
	finally:
		if f:
			f.close()

注意上面写法open后需要手动close(否则一直占用系统资源)和判断异常，python对此做了优化使用with open(...) s ... 
	
	file_txt = "D:\\test.txt"
	with open(file_txt, "r") as f:
		print(f.read)

# Excel #
读操作，xlrd模块
	
	#!/usr/bin/env python
	# -*- coding: utf-8 -*-
	# 读取excel数据
	# 小罗的需求，取第二行以下的数据，然后取每行前13列的数据
	import xlrd
	book = xlrd.open_workbook('test.xls') # 打开xls文件
	table = book.sheets()[0] # 打开第一张表
	#table = book.sheet_by_index(0)
	nrows = table.nrows      # 获取表的行数
	for i in range(nrows):   # 循环逐行打印
	    print table.row_values(i)[:13] # 取前十三列

写操作，xlwt模块

	import xlwt
	book = xlwt.Workbook(encoding='utf-8', style_compression=0)	#创建xls
	sheet = book.add_sheet('test', cell_overwrite_ok=True)		#新增表单
	sheet.write(0, 0, 'aaa')
	book.save(r'e:\test1.xls')

# 面向对象 #
self用法类似lua，不过成员函数参数需要写出来
	
	class Child(Parent): 	#继承
		__privateVar = 0	#私有
		_protectVar = 0		#保护
		publicVar = 0		#公开

	   	def __init__(self, name):
			self.name = name
	      	print "子类构造方法"
	 
	   	def __del__(self):
	      	print '子类析构方法'

		def displayName(self)
			print "Name: ", self.name
		
	child1 = Child("name1")
	child1.displayName()

# 正则 #
	re.match(pattern, string, flags=0)	#匹配起始位置
	re.search(pattern, string, flags=0)	#匹配整个字符串
	re.sub(pattern, repl, string, count=0, flags=0)	#替换，repl为函数
	re.compile(pattern[, flags])	#编译，返回正则
	findall(string[, pos[, endpos]])
	re.finditer(pattern, string, flags=0)
	re.split(pattern, string[, maxsplit=0, flags=0])



匹配中文实例

	for line in all_the_lines: 
		# 正则匹配
		regex = re.compile("(['\"])(?:\\\.|.)*?\\1")
		regex1 = re.compile(u"[\u4e00-\u9fa5]+")
		regex2 = re.compile(u"print")
		regex3 = re.compile(u"cclog")
		line2 = line.decode('utf8')	# writable line
		line1 = line.decode('utf8')	# temp line
		# ingore print and cclog
		if len(regex2.findall(line1)) + len(regex3.findall(line1)) == 0 :
			# iterate over all found quotes pairs
			for match in regex.finditer(line1):	
				start = match.start()
				end = match.end()	
				temp = line1[start:end]
				counter = 0
				for match1 in regex1.finditer(temp):
					counter += 1
				if counter > 0:
					nStr = 'Language.str%s'%strCounter
					# 写入日志文件
					if not fileStart:
						print >> logData,'-----------------------------------------------------------'
						print >> logData,'[file] ' + fileObj
						fileStart = True
					print >> logData,'[line] %d'% (num) + temp + " ------> " + nStr				
					line2 = line2.replace( temp, nStr)					
					mStr = 'str%s'%strCounter
					numStrTable.append(mStr+' = '+temp+',\n')
					strCounter += 1

		strTable.append(line2)
		num = num + 1

